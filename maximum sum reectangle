/*#include <bits/stdc++.h>
using namespace std;
int kadane(vector<int> arr){
    int current = 0;
    int best_so_far = INT_MIN;
    for(int i=0;i<arr.size();i++){
        current = max(arr[i], current + arr[i]);
        best_so_far = max(best_so_far, current);
    }
    return best_so_far;
}
int main(){
    int n,m;
    cin>>n>>m;
    int matrix[n][m];
    for(int i=0;i<n;i++)	for(int j=0;j<m;j++)	cin>>matrix[i][j];
    int ret = INT_MIN;
    for(int i=0;i<m;i++){
        for(int j=i;j<m;j++){
            vector<int> sum;
            for(int row = 0;row<n;row++){
                int s = 0;
                for(int col = i;col<=j;col++)	s+=matrix[row][col];
                sum.push_back(s);
            }
            ret = max(ret,kadane(sum));
            //cout<<i<<" "<<j<<" "<<ret<<endl;
        }
    }
    cout<<ret<<endl;
    return 0;
}*/




#include <bits/stdc++.h>
using namespace std;
int kadane(int arra[],int n)
{
    int ans=0,maxans=INT_MIN;
    for(int i=0;i<n;i++)
    {
        ans+=arra[i];
        if(ans>maxans)
            maxans=ans;
        if(ans<0)
            ans=0;
        
    }

    return maxans;
}
int main()
{
/*
4 5
1 2 -1 -4 -20
-8 -3 4 2 1
3 8 10 1 3
-4 -1 1 7 -6
*/
    int r,c;
    cin>>r>>c;
    int **arr=new int*[r];
    for(int i=0;i<r;i++)
    {
        arr[i]=new int[c];
        for(int j=0;j<c;j++)
        {
            cin>>arr[i][j];
        }
    }
    int max=INT_MIN;
    //vector<vector<int>> sum;
    for(int i=0;i<c;i++)
    {
        //vector<int> v;
        int a[r]={0};
        for(int j=i;j<c;j++)
        {
            for(int k=0;k<r;k++)
            {
                a[k]+=arr[k][j];
                //cout<<arr[k][j]<<"aaaaaaaaaa"<<a[k]<<endl;
            }
            int s=kadane(a,r);
            if(s>max)
                max=s;
            
            //cout<<s<<" "<<i<<" "<<j<<endl;
            //v.push_back(s);
        }
        //sum.push_back(v);

    }cout<<max<<endl;

}
